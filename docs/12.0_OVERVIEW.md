# Python Architecture for Aerospace Reliability Patterns

**Version**: 2.0 | **Status**: Production-Ready Specification

---

## TL;DR

| Aspect | Summary |
|--------|---------|
| **What** | Framework-agnostic Python package for aerospace-grade reliability in agentic AI systems |
| **Why** | Achieve 99.99%+ reliability through proven FDIR (Fault Detection, Isolation, Recovery) patterns |
| **When** | Production systems requiring fault tolerance, graceful degradation, or high availability |
| **Heritage** | 40+ years of NASA/ESA mission-critical systems methodology |

---

## Quick Start Decision Tree

```
                    What do you need?
                          ‚îÇ
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚ñº             ‚ñº             ‚ñº
      Fault Tolerance   Redundancy   Understand
       for API calls?   for critical  the theory?
            ‚îÇ           decisions?        ‚îÇ
            ‚ñº             ‚îÇ               ‚ñº
     12.2_FDIR_STRATEGIES ‚îÇ         12.1_CORE_ABSTRACTIONS
     (RetryAgent,         ‚îÇ         (Types, Protocols)
      CircuitBreaker)     ‚ñº
                    12.4_PATTERNS
                    (TMRAgent, Voting)
                          ‚îÇ
                          ‚ñº
              Need code examples?
                    ‚îÇ
           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚ñº        ‚ñº        ‚ñº
        12.6    12.5      12.7
      EXAMPLES INTEGRATION REFERENCE
```

---

## Document Map

| Document | Purpose | Lines | Read When... |
|----------|---------|-------|--------------|
| **12.0_OVERVIEW.md** | Navigation, status, decisions | ~100 | Starting here |
| **12.1_CORE_ABSTRACTIONS.md** | Types, protocols, exceptions, plugins | ~600 | Building from scratch |
| **12.2_FDIR_STRATEGIES.md** | Detection, isolation, recovery strategies | ~800 | Adding fault tolerance |
| **12.3_COMPOSITION.md** | Operators (‚äó·µ£, ;f, ‚òÖ·µ£, +‚Çö), algebra | ~600 | Combining patterns |
| **12.4_PATTERNS.md** | High-level patterns (FDIR, TMR, Fallback) | ~500 | Choosing a pattern |
| **12.5_INTEGRATION.md** | Adapters, config, metrics, security | ~600 | Connecting to frameworks |
| **12.6_EXAMPLES.md** | Complete runnable code examples | ~1000 | Copy-paste ready code |
| **12.7_REFERENCE.md** | Quick reference, appendices, testing | ~300 | Fast lookup |

---

## Implementation Status

### Core Components

| Component | Status | Module | Notes |
|-----------|--------|--------|-------|
| **Core Types** | ‚úÖ Complete | `core/types.py` | HealthState, FailureType, etc. |
| **Core Protocols** | ‚úÖ Complete | `core/protocols.py` | Agent, DetectionStrategy, etc. |
| **Exceptions** | ‚úÖ Complete | `core/exceptions.py` | Full error hierarchy |
| **Plugin Registry** | ‚úÖ Complete | `plugins/registry.py` | Entry point discovery |

### Detection Strategies (FDIR-D)

| Component | Status | Module | Notes |
|-----------|--------|--------|-------|
| TimeoutDetector | ‚úÖ Complete | `detection/timeout.py` | Response time monitoring |
| ExceptionDetector | ‚úÖ Complete | `detection/exception.py` | Error catching |
| OutputValidationDetector | ‚úÖ Complete | `detection/validation.py` | Schema validation |
| StatisticalAnomalyDetector | ‚úÖ Complete | `detection/anomaly.py` | Z-score based |
| CompositeDetector | ‚úÖ Complete | `detection/composite.py` | Multi-strategy |

### Isolation Strategies (FDIR-I)

| Component | Status | Module | Notes |
|-----------|--------|--------|-------|
| CircuitBreakerIsolation | ‚úÖ Complete | `isolation/circuit_breaker.py` | State machine |
| HierarchicalIsolation | ‚úÖ Complete | `isolation/hierarchical.py` | Parent-child propagation |
| BulkheadIsolation | ‚úÖ Complete | `isolation/bulkhead.py` | Thread pool isolation |

### Recovery Strategies (FDIR-R)

| Component | Status | Module | Notes |
|-----------|--------|--------|-------|
| RetryStrategy | ‚úÖ Complete | `recovery/retry.py` | Exponential backoff |
| FallbackStrategy | ‚úÖ Complete | `recovery/fallback.py` | Sequential alternatives |
| DegradationStrategy | ‚úÖ Complete | `recovery/degradation.py` | Capability reduction |
| SafeModeStrategy | ‚úÖ Complete | `recovery/safe_mode.py` | Minimal operation |
| EscalationLadder | ‚úÖ Complete | `recovery/escalation.py` | L0‚ÜíL3 escalation |

### Composition Operators

| Operator | Status | Module | Notes |
|----------|--------|--------|-------|
| ‚äó·µ£ Redundant Parallel | ‚úÖ Complete | `composition/redundant_parallel.py` | TMR/NMR |
| ;f Fallback Sequential | ‚úÖ Complete | `composition/fallback_sequential.py` | First success |
| ‚òÖ·µ£ Resilient Iterative | ‚úÖ Complete | `composition/resilient_iterative.py` | Bounded retry loop |
| +‚Çö Protected Augmentation | ‚úÖ Complete | `composition/protected_augmentation.py` | Tool wrapping |

### High-Level Patterns

| Pattern | Status | Module | Notes |
|---------|--------|--------|-------|
| FDIRAgent | ‚úÖ Complete | `patterns/fdir_agent.py` | Full D‚ÜíI‚ÜíR pipeline |
| TMRAgent | ‚úÖ Complete | `patterns/tmr_agent.py` | Triple modular redundancy |
| RetryAgent | ‚úÖ Complete | `patterns/retry_agent.py` | Wrapper pattern |
| FallbackChainAgent | ‚úÖ Complete | `patterns/fallback_chain_agent.py` | Sequential fallback |
| HealthMonitorAgent | ‚úÖ Complete | `patterns/health_monitor_agent.py` | Continuous monitoring |
| CircuitBreakerAgent | ‚úÖ Complete | `patterns/circuit_breaker_agent.py` | Fast-fail pattern |

### Framework Adapters

| Adapter | Status | Module | Notes |
|---------|--------|--------|-------|
| GenericAdapter | ‚úÖ Complete | `adapters/generic.py` | Any callable |
| GoogleADKAdapter | ‚úÖ Complete | `adapters/google_adk.py` | Google ADK |
| LangChainAdapter | ‚úÖ Complete | `adapters/langchain.py` | LangChain |
| OpenAIAdapter | ‚úÖ Complete | `adapters/openai.py` | OpenAI Assistants |

### Status Legend

| Badge | Meaning |
|-------|---------|
| ‚úÖ Complete | Full implementation with examples |
| üî∂ Partial | Protocol + basic implementation |
| üìã Spec Only | Interface defined, implementation pending |
| üîÆ Future | Documented as future work |

---

## Design Principles

| Principle | Implementation |
|-----------|----------------|
| **Protocol-Oriented** | `typing.Protocol` for structural typing |
| **Async-First** | All paths use `async`/`await` with `AsyncIterator` |
| **Dependency Injection** | Framework code via adapters, not hard-coded |
| **Configuration-Driven** | Pydantic models with YAML/JSON/env support |
| **Plugin-Extensible** | Registry pattern with entry point discovery |

---

## Theoretical Foundation

This architecture implements the **5-dimensional design space** from [11_AEROSPACE_RELIABILITY_PATTERNS.md](11_AEROSPACE_RELIABILITY_PATTERNS.md):

```
Œõ' = D‚ÇÅ √ó D‚ÇÇ √ó D‚ÇÉ √ó D‚ÇÑ √ó D‚ÇÖ
   = Temporal √ó Communication √ó Decision √ó Tools √ó FaultTolerance
   = 3 √ó 3 √ó 3 √ó 3 √ó 4 = 324 configurations
```

### D‚ÇÖ (Fault Tolerance) ‚Üí ECSS Level Mapping

| D‚ÇÖ Value | ECSS Level | Pattern | Use Case |
|----------|------------|---------|----------|
| None | E1 (Ground Control) | Direct execution | Development, testing |
| Retry | E2 (Event-Based) | RetryAgent, CircuitBreaker | Transient failures |
| Redundant | E3 (Adaptive) | TMRAgent, Voting | Critical decisions |
| FDIR | E4 (Full Autonomy) | FDIRAgent | Mission-critical |

---

## Related Documentation

| Document | Relationship |
|----------|--------------|
| [10_UNIFIED_THEORY.md](10_UNIFIED_THEORY.md) | Base 4D design space theory |
| [11_AEROSPACE_RELIABILITY_PATTERNS.md](11_AEROSPACE_RELIABILITY_PATTERNS.md) | Theoretical foundation, proofs |
| [02_CORE_CONCEPTS.md](02_CORE_CONCEPTS.md) | Session state, events, tools |
| [06_GOAL_SETTING_ITERATION.md](06_GOAL_SETTING_ITERATION.md) | LLM-as-Judge pattern |

---

## Version History

| Version | Date | Changes |
|---------|------|---------|
| 2.0 | 2025-12-08 | Modular refactor, all gaps filled, LLM-optimized |
| 1.0 | 2025-12-08 | Initial monolithic version (archived as `_v1.md`) |
